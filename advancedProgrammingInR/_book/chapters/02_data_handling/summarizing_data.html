<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Summarizing data | Advanced Programming in R</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.4.3">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../chapters/02_data_handling/format_conversions.html" />
    
    
    <link rel="prev" href="../../chapters/02_data_handling/DATA_HANDLING.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="2.1" data-basepath="../.." data-revision="Thu Oct 08 2015 18:01:53 GMT+0200 (CEST)">
    

<div class="book-summary">
    <div class="book-search" role="search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="chapters/01_structured_workflow/STRUCTURED_WORKFLOW.html">
            
                
                    <a href="../../chapters/01_structured_workflow/STRUCTURED_WORKFLOW.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Towards a structured workflow
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="chapters/01_structured_workflow/projects.html">
            
                
                    <a href="../../chapters/01_structured_workflow/projects.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        RStudio projects
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="chapters/01_structured_workflow/version_control.html">
            
                
                    <a href="../../chapters/01_structured_workflow/version_control.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        GitHub version control
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="chapters/02_data_handling/DATA_HANDLING.html">
            
                
                    <a href="../../chapters/02_data_handling/DATA_HANDLING.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Data handling and visualization
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.1" data-path="chapters/02_data_handling/summarizing_data.html">
            
                
                    <a href="../../chapters/02_data_handling/summarizing_data.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Summarizing data
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="chapters/02_data_handling/format_conversions.html">
            
                
                    <a href="../../chapters/02_data_handling/format_conversions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Data format conversions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="chapters/02_data_handling/visualization.html">
            
                
                    <a href="../../chapters/02_data_handling/visualization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Visualizing data using ggplot2
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="chapters/03_iteration_procedures/ITERATION_PROCEDURES.html">
            
                
                    <a href="../../chapters/03_iteration_procedures/ITERATION_PROCEDURES.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Iteration procedures
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="chapters/03_iteration_procedures/for_loops.html">
            
                
                    <a href="../../chapters/03_iteration_procedures/for_loops.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        for loops
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="chapters/03_iteration_procedures/apply.html">
            
                
                    <a href="../../chapters/03_iteration_procedures/apply.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        The *apply family
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="chapters/03_iteration_procedures/functional_programming.html">
            
                
                    <a href="../../chapters/03_iteration_procedures/functional_programming.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Functional programming
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="chapters/04_speed_up/SPEED_UP.html">
            
                
                    <a href="../../chapters/04_speed_up/SPEED_UP.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Speeding up iteration procedures
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="chapters/04_speed_up/parallelization.html">
            
                
                    <a href="../../chapters/04_speed_up/parallelization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Parallelization
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="chapters/04_speed_up/rcpp.html">
            
                
                    <a href="../../chapters/04_speed_up/rcpp.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        C++ interconnectivity via Rcpp
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="chapters/05_final_remarks/FINAL_REMARKS.html">
            
                
                    <a href="../../chapters/05_final_remarks/FINAL_REMARKS.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Final remarks
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Advanced Programming in R</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="summarizing-data">Summarizing data</h1>
<p>The <strong>dplyr</strong> package is a marvelous and very intuitive set of tools to perform 
fast and easy data manipulation and summarization in preparation e.g. for 
visualization. In the following, we&apos;ll guide you through a selection of 
operations you may find helpful within the course of future R workflows on the 
basis of the &apos;diamonds&apos; dataset. Based on a very comprehensive 
<a href="https://rpubs.com/justmarkham/dplyr-tutorial" target="_blank">RPubs tutorial</a>, these include</p>
<ul>
<li><code>filter</code>, </li>
<li><code>select</code>, </li>
<li><code>arrange</code>, </li>
<li><code>mutate</code> and </li>
<li><code>summarise</code> (incl. <code>group_by</code>) </li>
</ul>
<p>each of which will be accompanied by an equivalent base-R approach.</p>
<h3 id="a-brief-note-on-tbl-df">A brief note on <code>tbl_df</code></h3>
<p>You probably noticed earlier that &apos;diamonds&apos; consists of a rather large number 
of observations. </p>
<pre><code class="lang-r"><span class="hljs-comment">## number of columns and rows of &apos;diamonds&apos;</span>
dim(diamonds)
</code></pre>
<pre><code>[1] 53940    10
</code></pre><p>Unless you are willing to stumble into truncated console output when typing 
<code>diamonds</code> (please don&apos;t do that), you are inevitably required to perform 
<code>head(diamonds)</code> or <code>str(diamonds)</code> in order to get an impression of the data 
you are dealing with. Along with <strong>dplyr</strong> comes a function called <code>tbl_df</code> that 
helps to overcome such ritual-like investigation procedures. </p>
<pre><code class="lang-r"><span class="hljs-comment">## required package</span>
<span class="hljs-keyword">library</span>(dplyr)

<span class="hljs-comment">## create a local data frame</span>
diamonds &lt;- tbl_df(diamonds)
diamonds
</code></pre>
<pre><code>Source: local data frame [53,940 x 10]

   carat       cut  color clarity depth table price     x     y     z
   (dbl)    (fctr) (fctr)  (fctr) (dbl) (dbl) (int) (dbl) (dbl) (dbl)
1   0.23     Ideal      E     SI2  61.5    55   326  3.95  3.98  2.43
2   0.21   Premium      E     SI1  59.8    61   326  3.89  3.84  2.31
3   0.23      Good      E     VS1  56.9    65   327  4.05  4.07  2.31
4   0.29   Premium      I     VS2  62.4    58   334  4.20  4.23  2.63
5   0.31      Good      J     SI2  63.3    58   335  4.34  4.35  2.75
6   0.24 Very Good      J    VVS2  62.8    57   336  3.94  3.96  2.48
7   0.24 Very Good      I    VVS1  62.3    57   336  3.95  3.98  2.47
8   0.26 Very Good      H     SI1  61.9    55   337  4.07  4.11  2.53
9   0.22      Fair      E     VS2  65.1    61   337  3.87  3.78  2.49
10  0.23 Very Good      H     VS1  59.4    61   338  4.00  4.05  2.39
..   ...       ...    ...     ...   ...   ...   ...   ...   ...   ...
</code></pre><p>Notice that not only the class and the dimensions of the dataset are displayed, 
but also the variable types of the single columns. Furthermore, the console 
output is truncated after the first 10 rows (which would also apply to the 
displayed columns if we were dealing with a somewhat wider dataset). Practically, 
this means that the appropriate use of <code>tbl_df</code> lets you kill two birds with one 
stone compared with the 2-step approach via <code>head</code> and <code>str</code> shown above. </p>
<h3 id="subsetting-data-via-filter">Subsetting data via <code>filter</code></h3>
<p>Just like base-R <code>subset</code> or simply indexing via conditional expressions 
included in square brackets, <code>filter</code> creates a subset of your data based on 
some user-defined criteria. For the time being, let&apos;s have a look at your 
subsetting abilities.</p>
<h4 id="task-2-1-1-base-r-subsetting">Task #2.1.1: base-R subsetting</h4>
<p>Suppose we want to create a subset of &apos;diamonds&apos; keeping all D-, E- or F-colored 
specimen with a &apos;Premium&apos; or &apos;Ideal&apos; cut quality and a weight of more than 3 
carat. Try to figure out two different solutions, one <u>with</u> and one 
<u>without</u> using <code>subset</code>. </p>
<center>
  <img src="https://upload.wikimedia.org/wikipedia/commons/2/25/Hourglass_2.svg" alt="hourglass" style="width: 125px;">
</center>



<p>Using <code>filter</code> is straightforward and very similar to <code>subset</code>. The first 
argument represents the data frame, whereas any subsequent argument represents a 
logical expression to filter particular rows. Note that in contrast to the 
direct subsetting via square brackets, you are not required to repeat the name 
of the data frame with every single condition.</p>
<pre><code class="lang-r">filter(diamonds, carat &gt; <span class="hljs-number">3</span> &amp;
         cut %<span class="hljs-keyword">in</span>% c(<span class="hljs-string">&quot;Premium&quot;</span>, <span class="hljs-string">&quot;Ideal&quot;</span>) &amp;
         color %<span class="hljs-keyword">in</span>% c(<span class="hljs-string">&quot;D&quot;</span>, <span class="hljs-string">&quot;E&quot;</span>, <span class="hljs-string">&quot;F&quot;</span>))
</code></pre>
<pre><code>Source: local data frame [2 x 10]

  carat     cut  color clarity depth table price     x     y     z
  (dbl)  (fctr) (fctr)  (fctr) (dbl) (dbl) (int) (dbl) (dbl) (dbl)
1  3.01 Premium      F      I1  62.2    56  9925  9.24  9.13  5.73
2  3.05 Premium      E      I1  60.9    58 10453  9.26  9.25  5.66
</code></pre><h3 id="selecting-columns-via-select">Selecting columns via <code>select</code></h3>
<p>Selecting specific columns from a data frame follows a similar syntax to 
<code>filter</code> and works analogous to SQL standards. Again, the first argument 
represents the data frame under consideration followed by the desired column 
names (without double quotes). </p>
<pre><code class="lang-r">select(diamonds, carat, cut, color, clarity)
</code></pre>
<pre><code>Source: local data frame [53,940 x 4]

   carat       cut  color clarity
   (dbl)    (fctr) (fctr)  (fctr)
1   0.23     Ideal      E     SI2
2   0.21   Premium      E     SI1
3   0.23      Good      E     VS1
4   0.29   Premium      I     VS2
5   0.31      Good      J     SI2
6   0.24 Very Good      J    VVS2
7   0.24 Very Good      I    VVS1
8   0.26 Very Good      H     SI1
9   0.22      Fair      E     VS2
10  0.23 Very Good      H     VS1
..   ...       ...    ...     ...
</code></pre><p>Note that both the use of <code>c</code> to combine the single column names into a vector 
as well as the need for double quotes became obsolete. In addition to this, 
column names may be treated analogous to numeric indices, eliminating the need 
to count columns when desiring to extract several consecutive columns from a 
rather wide datasets. </p>
<pre><code class="lang-r">select(diamonds, carat:clarity, price)
</code></pre>
<pre><code>Source: local data frame [53,940 x 5]

   carat       cut  color clarity price
   (dbl)    (fctr) (fctr)  (fctr) (int)
1   0.23     Ideal      E     SI2   326
2   0.21   Premium      E     SI1   326
3   0.23      Good      E     VS1   327
4   0.29   Premium      I     VS2   334
5   0.31      Good      J     SI2   335
6   0.24 Very Good      J    VVS2   336
7   0.24 Very Good      I    VVS1   336
8   0.26 Very Good      H     SI1   337
9   0.22      Fair      E     VS2   337
10  0.23 Very Good      H     VS1   338
..   ...       ...    ...     ...   ...
</code></pre><p>There&apos;s also a set of additional helper functions, including <code>starts_with</code>, 
<code>ends_with</code>, <code>matches</code> and <code>contains</code>, which definitely go beyond the scope of 
this short introduction. Still, it&apos;s good to know that such things existed in 
case you needed any of them.</p>
<h3 id="a-brief-note-on-chaining-or-pipelining">A brief note on chaining (or pipelining)</h3>
<p>Now suppose we wanted to select the same columns from the previously created 
subset of data. Traditionally, this would either require a 2-step approach, 
generating otherwise unnecessary intermediate results, via </p>
<pre><code class="lang-r"><span class="hljs-comment">## first, create subset</span>
diamonds_sub &lt;- filter(diamonds, carat &gt; <span class="hljs-number">3</span> &amp;
                         cut %<span class="hljs-keyword">in</span>% c(<span class="hljs-string">&quot;Premium&quot;</span>, <span class="hljs-string">&quot;Ideal&quot;</span>) &amp;
                         color %<span class="hljs-keyword">in</span>% c(<span class="hljs-string">&quot;D&quot;</span>, <span class="hljs-string">&quot;E&quot;</span>, <span class="hljs-string">&quot;F&quot;</span>))

<span class="hljs-comment">## second, select columns</span>
select(diamonds_sub, carat:clarity, price)
</code></pre>
<p>or nested function calls which are usually hard to read.</p>
<pre><code class="lang-r"><span class="hljs-comment">## all-in-one nested solution</span>
select(
  filter(diamonds, carat &gt; <span class="hljs-number">3</span> &amp;
           cut %<span class="hljs-keyword">in</span>% c(<span class="hljs-string">&quot;Premium&quot;</span>, <span class="hljs-string">&quot;Ideal&quot;</span>) &amp;
           color %<span class="hljs-keyword">in</span>% c(<span class="hljs-string">&quot;D&quot;</span>, <span class="hljs-string">&quot;E&quot;</span>, <span class="hljs-string">&quot;F&quot;</span>)), 
  carat:clarity, price
)
</code></pre>
<p><strong>dplyr</strong> introduces the <code>%&gt;%</code> operator which is meant to bridge a set of 
connected processing steps, thus eliminating the need for intermediary 
variables (&apos;diamonds_sub&apos;) or nested functions. Just think of <code>%&gt;%</code> as a &quot;then&quot; 
connecting two parts of a sentence.</p>
<pre><code class="lang-r">diamonds %&gt;%
  filter(carat &gt; <span class="hljs-number">3</span> &amp;
           cut %<span class="hljs-keyword">in</span>% c(<span class="hljs-string">&quot;Premium&quot;</span>, <span class="hljs-string">&quot;Ideal&quot;</span>) &amp;
           color %<span class="hljs-keyword">in</span>% c(<span class="hljs-string">&quot;D&quot;</span>, <span class="hljs-string">&quot;E&quot;</span>, <span class="hljs-string">&quot;F&quot;</span>)) %&gt;%
  select(carat:clarity, price)
</code></pre>
<pre><code>Source: local data frame [2 x 5]

  carat     cut  color clarity price
  (dbl)  (fctr) (fctr)  (fctr) (int)
1  3.01 Premium      F      I1  9925
2  3.05 Premium      E      I1 10453
</code></pre><p>Note that chaining comes in handy when performing multiple operations at once, 
rendering your code much more elegant and reducing the accumulated overhead 
significantly. The single worksteps can be read from left to right and from top 
to bottom, just like you would read the pages of a book. </p>
<h3 id="reordering-data-frames-via-arrange">Reordering data frames via <code>arrange</code></h3>
<p><code>arrange</code> ensures a fast and easy rearrangement of rows based on certain 
variables. Although this can be done using base-R, its necessity soon becomes 
clear when dealing with rearrangements based on multiple variables as the <strong>dplyr</strong> 
approach requires far less typing.</p>
<h4 id="task-2-1-2-base-r-rearrangement-of-rows">Task #2.1.2: base-R rearrangement of rows</h4>
<p>Here&apos;s a tricky one. Let&apos;s assume we wanted to rearrange the rows of a subset of 
&apos;diamonds&apos; (color, price, carat) according to color, with the best color (D) on 
top. Since we&apos;re also interested in a preferably low price, the diamonds of 
uniform color should be sorted according to their price, with cheapest ones on 
top. Finally, for each set of diamonds with a specified color and price, we want 
their weights arranged in descending order, with the heaviest specimen on top.</p>
<center>
  <img src="https://upload.wikimedia.org/wikipedia/commons/2/25/Hourglass_2.svg" alt="hourglass" style="width: 125px;">
</center>



<p>Again, the <strong>dplyr</strong> approach is much simpler and can be done in one go. </p>
<pre><code class="lang-r">diamonds %&gt;%
  select(color, price, carat) %&gt;%
  arrange(color, price, desc(carat))
</code></pre>
<pre><code>Source: local data frame [53,940 x 3]

    color price carat
   (fctr) (int) (dbl)
1       D   357  0.23
2       D   357  0.23
3       D   361  0.32
4       D   362  0.23
5       D   367  0.24
6       D   367  0.20
7       D   367  0.20
8       D   367  0.20
9       D   373  0.24
10      D   373  0.23
..    ...   ...   ...
</code></pre><h3 id="add-new-columns-via-mutate">Add new columns via <code>mutate</code></h3>
<p><code>mutate</code> lets you add new variables to an existing data frame. It is basically 
an extended version of base-R <code>transform</code> in the sense that it allows you to 
directly work with columns you&apos;ve just created. </p>
<pre><code class="lang-r">diamonds %&gt;%
  select(color, carat, price) %&gt;%
  mutate(ppc = price / carat, 
         ppc_rnd = round(ppc, <span class="hljs-number">2</span>))
</code></pre>
<pre><code>Source: local data frame [53,940 x 5]

    color carat price      ppc ppc_rnd
   (fctr) (dbl) (int)    (dbl)   (dbl)
1       E  0.23   326 1417.391 1417.39
2       E  0.21   326 1552.381 1552.38
3       E  0.23   327 1421.739 1421.74
4       I  0.29   334 1151.724 1151.72
5       J  0.31   335 1080.645 1080.65
6       J  0.24   336 1400.000 1400.00
7       I  0.24   336 1400.000 1400.00
8       H  0.26   337 1296.154 1296.15
9       E  0.22   337 1531.818 1531.82
10      H  0.23   338 1469.565 1469.57
..    ...   ...   ...      ...     ...
</code></pre><h3 id="summarise-values-via-summarise">Summarise values via <code>summarise</code></h3>
<p>Similar to <code>plyr::summarise</code>, the <strong>dplyr</strong> version of <code>summarise</code> lets you melt 
a data frame into a single row depending on the supplied function. The function 
works quite similar as base-R <code>aggregate</code>. However, the ease of use is definitely 
on the side of <code>summarise</code>. </p>
<h4 id="task-2-1-3-base-r-data-aggregation">Task #2.1.3: base-R data aggregation</h4>
<p>In order to demonstrate <strong>dplyr</strong>&apos;s ease of use in terms of data summarization, 
try to <code>aggregate</code> diamonds in such a fashion that you end up with a data frame 
showing the minimum, mean and maximum price per diamond color.</p>
<center>
  <img src="https://upload.wikimedia.org/wikipedia/commons/2/25/Hourglass_2.svg" alt="hourglass" style="width: 125px;">
</center>



<p>As for the <strong>dplyr</strong> solution, the <code>group_by</code> function comes in handy when 
trying to calculate metrics from sub-groups of data, e.g. depending on the 
diamonds&apos; color, rather than from the entire data frame.</p>
<pre><code class="lang-r">diamonds %&gt;% 
  group_by(color) %&gt;%
  summarise(MIN = min(price), MEAN = mean(price), MAX = max(price))
</code></pre>
<pre><code>Source: local data frame [7 x 4]

   color   MIN     MEAN   MAX
  (fctr) (int)    (dbl) (int)
1      D   357 3169.954 18693
2      E   326 3076.752 18731
3      F   342 3724.886 18791
4      G   354 3999.136 18818
5      H   337 4486.669 18803
6      I   334 5091.875 18823
7      J   335 5323.818 18710
</code></pre><p>In order to summarize an entire variable into one single value, just drop the 
<code>group_by</code> function. </p>
<pre><code class="lang-r">summarise(diamonds, min = min(price), mean = mean(price), max = max(price))
</code></pre>
<pre><code>Source: local data frame [1 x 3]

    min   mean   max
  (int)  (dbl) (int)
1   326 3932.8 18823
</code></pre><p>Now that you&apos;re familiar with the basics of data manipulation via <strong>dplyr</strong> and 
before moving on to actual data visualization via <strong>ggplot2</strong>, it&apos;s time to have 
a brief look at data format conversion from wide to long format which is essential 
for displaying numerous groups of data in one single plot.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../chapters/02_data_handling/DATA_HANDLING.html" class="navigation navigation-prev " aria-label="Previous page: Data handling and visualization"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../chapters/02_data_handling/format_conversions.html" class="navigation navigation-next " aria-label="Next page: Data format conversions"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
